

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Coverage Model &mdash; riscv-dv  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Customize and Extend Generator" href="customize_extend_generator.html" />
    <link rel="prev" title="Generator Flow" href="generator_flow.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> riscv-dv
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="end_to_end_simulation.html">End to End Simulation Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="generator_flow.html">Generator Flow</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Coverage Model</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#functional-coverage-work-in-progress">Functional coverage (work in progress)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="customize_extend_generator.html">Customize and Extend Generator</a></li>
<li class="toctree-l1"><a class="reference internal" href="class_reference.html">Class Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="cmd_line_reference.html">Command Line Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">riscv-dv</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Coverage Model</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/coverage_model.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="coverage-model">
<h1>Coverage Model<a class="headerlink" href="#coverage-model" title="Permalink to this headline">¶</a></h1>
<div class="section" id="functional-coverage-work-in-progress">
<h2>Functional coverage (work in progress)<a class="headerlink" href="#functional-coverage-work-in-progress" title="Permalink to this headline">¶</a></h2>
<p>This flow extracts functional coverage information from the
instruction trace generated by ISS. It’s independent of the instruction generation
flow and does not require a tracer implementation in the RTL. You can use this
flow as long as your program can be run with an ISS supported in this flow. The
flow parses the instruction trace log and converts it to a CSV trace format. After
that, a SV test is run to process the CSV trace files and sample functional
coverage from there.</p>
<p>The functional covergroup is defined in <a class="reference external" href="https://github.com/google/riscv-dv/blob/master/src/riscv_instr_cover_group.sv">riscv_instr_cover_group.sv</a>.
It includes below major categories:</p>
<ul class="simple">
<li>Cover all operands for each instruction</li>
<li>Hazard conditions</li>
<li>Corner cases like overflow, underflow, divide by zero</li>
<li>Aligned/unaligned load/store</li>
<li>Positive/negative immediate value</li>
<li>Forward/backward branches, branch hit history</li>
<li>Hint instruction</li>
<li>Illegal instruction</li>
<li>All compressed and non-compressed opcode</li>
<li>Access to all implemened privileged CSR</li>
<li>Exception and interrupt</li>
</ul>
<p>The functional covergroup is still under active development. Please feel free to
add anything you are interested or file a bug for any feature request.</p>
<p>Before start, please check the you have modified <a class="reference external" href="https://github.com/google/riscv-dv/blob/master/setting/riscv_core_setting.sv">riscv_core_setting.sv</a> to reflect your processor capabilities. The covergroup is selectively instantiated based on this setting so that you don’t need to deal with excluding unrelated coverpoints later. You also need to get the Spike ISS or riscvOVPsim ISS (riscv-ovpsim) setup before running this flow:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Process spike simulation log and collect functional coverage</span>
<span class="n">cov</span> <span class="o">--</span><span class="nb">dir</span> <span class="n">out</span><span class="o">/</span><span class="n">spike_sim</span>

<span class="c1"># Get the command reference</span>
<span class="n">cov</span> <span class="o">--</span><span class="n">help</span>

<span class="c1"># Run the coverage flow with predefined targets</span>
<span class="n">cov</span> <span class="o">--</span><span class="nb">dir</span> <span class="n">out</span><span class="o">/</span><span class="n">spike_sim</span> <span class="o">--</span><span class="n">target</span> <span class="n">rv32imc</span>
</pre></div>
</div>
<p>The coverage sampling from the CSV could be time consuming if you have a large
number of log to process. You can split them to small batches and run with LSF
in parallel:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Split the run to process 5 CSV at a time, and run with LSF</span>
<span class="n">cov</span> <span class="o">--</span><span class="nb">dir</span> <span class="n">out</span><span class="o">/</span><span class="n">spike_sim</span> <span class="o">--</span><span class="n">lsf_cmd</span> <span class="s2">&quot;bsub .....&quot;</span> <span class="o">-</span><span class="n">bz</span> <span class="mi">5</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="customize_extend_generator.html" class="btn btn-neutral float-right" title="Customize and Extend Generator" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="generator_flow.html" class="btn btn-neutral float-left" title="Generator Flow" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Google, Inc.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>